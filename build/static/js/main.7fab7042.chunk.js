(this.webpackJsonpfunretro=this.webpackJsonpfunretro||[]).push([[0],{151:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(30),i=a.n(s),o=(a(151),a(8)),d=a(301),l=a(308),j=a(305),u=a(302),b="http://localhost/khanhhongtranle/funretro/api/",p="funretro-react",O="funretro-user-id";function h(e,t,a,n){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&(200===c.status?a(JSON.parse(c.responseText)):n instanceof Function&&n(c.statusText))},c.open("post",b+e),c.send(t)}function x(e,t){var a=new Date,n=t;a.setTime(a.getTime()+2592e6),document.cookie=e+"="+n+"; expires="+a.toUTCString()}function f(e){var t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():null}function m(e){var t=new Date;t.setTime(t.getTime()+-864e5),document.cookie=e+"=; expires="+t.toUTCString()}function g(){var e=window.location.pathname.substr(1);return!(!["login","signup"].includes(e)&&!f(p))}var v=a(25);var w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),b=i[0],f=i[1];return Object(n.jsx)(d.a,{style:{paddingTop:"2rem"},children:Object(n.jsxs)(l.a,{style:{padding:"1rem",width:"300px",margin:"auto"},children:[Object(n.jsx)("h2",{className:"text-center",children:"Login"}),Object(n.jsxs)(j.a,{children:[Object(n.jsxs)(j.a.Group,{controlId:"username",children:[Object(n.jsx)(j.a.Label,{children:"Username"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"Username",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsxs)(j.a.Group,{controlId:"password",children:[Object(n.jsx)(j.a.Label,{children:"Password"}),Object(n.jsx)(j.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return f(e.target.value)}})]}),Object(n.jsx)(u.a,{onClick:function(){var e=new FormData;e.append("username",a),e.append("password",b),h("login",e,(function(e){e.success?(x(p,e.token),x(O,e.user_id),window.location.href="/"):alert("Login failed")}))},variant:"primary",type:"button",children:"Login"}),Object(n.jsx)(v.b,{style:{marginLeft:"20px"},to:"/signup",children:"Sign up"})]})]})})},C=(a(157),a(10)),y=a(303),k=a(138),S=a(304),L=a(307),F=a(306);var I=function(){return Object(n.jsxs)(L.a,{bg:"primary",variant:"dark",children:[Object(n.jsx)(L.a.Brand,{href:"/",children:"Funretro"}),Object(n.jsxs)(F.a,{className:"mr-auto",children:[Object(n.jsx)(u.a,{variant:"light",onClick:function(){m(p),m(O),window.location.href="/"},children:"Logout"}),Object(n.jsx)(u.a,{onClick:function(){window.location.href="/account"},style:{marginLeft:"20px"},variant:"outline-light",children:"Account"})]})]})};var T=function(){var e=g(),t=Object(c.useState)([]),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(""),b=Object(o.a)(i,2),x=b[0],m=b[1],w=Object(c.useState)(!1),L=Object(o.a)(w,2),F=L[0],T=L[1],_=function(){return T(!1)};return Object(c.useEffect)((function(){var e=!0,t=new FormData;return t.append("token",f(p)),t.append("user_id",f(O)),h("getBoards",t,(function(t){t.success&&(console.log(t),e&&s(t.data))})),function(){e=!1}}),[]),e?Object(n.jsxs)(d.a,{fluid:!0,children:[Object(n.jsx)(I,{}),Object(n.jsxs)("div",{style:{margin:"20px 30px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{style:{fontSize:"30px"},children:"My Boards"}),Object(n.jsx)(u.a,{style:{fontSize:"10px",margin:"10px 0 20px 30px"},variant:"outline-primary",onClick:function(){return T(!0)},children:"New board"})]}),Object(n.jsx)(y.a,{children:r.map((function(e){return Object(n.jsx)(k.a,{xs:!0,children:Object(n.jsx)(l.a,{style:{width:"18rem",marginTop:"1rem"},children:Object(n.jsxs)(l.a.Body,{children:[Object(n.jsx)(l.a.Title,{children:e.board_name}),Object(n.jsxs)(l.a.Text,{children:["Date Created: ",e.date_created]}),Object(n.jsx)(v.b,{to:"/detail/"+e.id,style:{marginRight:"10px"},children:Object(n.jsx)(u.a,{variant:"link",type:"button",children:"More"})}),Object(n.jsx)(u.a,{variant:"link",type:"button",onClick:function(){return function(e){var t=new FormData;t.append("id",e),t.append("user_id",f(O)),t.append("token",f(p)),h("deleteBoard",t,(function(e){console.log(e),e.success?(T(!1),s(e.data)):alert("Failed")}))}(e.id)},children:"Delete"}),Object(n.jsx)(l.a.Link,{children:"Share Link"})]})})})}))})]}),Object(n.jsxs)(S.a,{show:F,onHide:_,animation:!1,children:[Object(n.jsx)(S.a.Header,{closeButton:!0,children:Object(n.jsx)(S.a.Title,{children:"Modal heading"})}),Object(n.jsx)(S.a.Body,{children:Object(n.jsxs)(j.a.Group,{controlId:"boardname",children:[Object(n.jsx)(j.a.Label,{children:"Board name"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"Username",onChange:function(e){return m(e.target.value)}})]})}),Object(n.jsxs)(S.a.Footer,{children:[Object(n.jsx)(u.a,{variant:"secondary",onClick:_,children:"Close"}),Object(n.jsx)(u.a,{variant:"primary",onClick:function(e){var t=new FormData;t.append("board_name",x),t.append("user_id",f(O)),t.append("token",f(p)),h("saveBoard",t,(function(e){console.log(e),e.success?(T(!1),s(e.data)):alert("Failed")}))},children:"Add"})]})]})]}):Object(n.jsx)(C.a,{to:"/login"})},_=a(72),D=a(140),E=a.n(D),B={lanes:[{id:"WENTWELL",title:"WENT WELL",cards:[]},{id:"TOIMPROVE",title:"TO IMPROVE",cards:[]},{id:"ACTIONITEMS",title:"ACTION ITEMS",cards:[]}]};function G(e){var t=g(),a=Object(c.useState)(B),r=Object(o.a)(a,2),s=r[0],i=r[1],l=Object(c.useState)("board name"),b=Object(o.a)(l,2),O=b[0],x=b[1],m=Object(c.useState)(""),v=Object(o.a)(m,2),w=v[0],k=v[1],L=Object(c.useState)({}),F=Object(o.a)(L,2),T=F[0],D=F[1],G=Object(c.useState)(!1),P=Object(o.a)(G,2),U=P[0],N=P[1],M=Object(c.useState)(!1),A=Object(o.a)(M,2),H=A[0],R=A[1];return Object(c.useEffect)((function(){var t=!0,a=new FormData;return a.append("token",f(p)),a.append("board_id",e.match.params.id),h("getBoardDetail",a,(function(e){if(e.success){var a,n=e.data.board_details,c=B,r=Object(_.a)(n);try{var s=function(){var e=a.value,t={id:e.id.toString(),title:e.title,description:e.description};c.lanes.find((function(t){return t.id===e.type})).cards.push(t)};for(r.s();!(a=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}t&&(i(c),x(e.data.board_name),k(e.data.board_name))}})),function(){t=!1}}),[]),t?Object(n.jsxs)(d.a,{fluid:!0,children:[Object(n.jsx)(I,{}),Object(n.jsxs)("div",{style:{margin:"20px 30px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{style:{fontSize:"30px"},children:O}),Object(n.jsx)(u.a,{style:{margin:"10px 0 20px 30px"},variant:"link",onClick:function(){N(!0)},children:"Edit"}),Object(n.jsx)(u.a,{style:{fontSize:"10px",margin:"10px 0 20px 30px"},variant:"outline-primary",children:"Share board"})]}),Object(n.jsx)(y.a,{children:Object(n.jsx)(E.a,{cardDraggable:!0,laneDraggable:!1,draggable:!0,editable:!0,onCardAdd:function(t,a){var n=new FormData;n.append("token",f(p)),n.append("board_id",e.match.params.id),n.append("title",t.title),n.append("description",t.description),n.append("type",a),h("addCard",n,(function(e){e.success&&console.log(1)}))},onCardDelete:function(e,t){var a=new FormData;a.append("token",f(p)),a.append("card_id",e),h("deleteCard",a,(function(e){e.success&&console.log(1)}))},onCardMoveAcrossLanes:function(e,t,a,n){console.log(e),console.log(t),console.log(a),console.log(n)},onCardClick:function(e,t,a){var n=new FormData;n.append("token",f(p)),n.append("card_id",e),h("getCard",n,(function(e){if(e.success&&e.data.length>0){R(!0);var t={id:e.data[0].id,title:e.data[0].title,description:e.data[0].description};D(t)}}))},style:{backgroundColor:"white"},data:s})})]}),Object(n.jsxs)(S.a,{show:U,onHide:function(){N(!1)},animation:!1,children:[Object(n.jsx)(S.a.Header,{closeButton:!0,children:Object(n.jsx)(S.a.Title,{children:"Edit board"})}),Object(n.jsx)(S.a.Body,{children:Object(n.jsxs)(j.a.Group,{controlId:"boardname",children:[Object(n.jsx)(j.a.Label,{children:"Board name"}),Object(n.jsx)(j.a.Control,{type:"text",value:w,onChange:function(e){return k(e.target.value)}})]})}),Object(n.jsxs)(S.a.Footer,{children:[Object(n.jsx)(u.a,{variant:"secondary",onClick:function(){N(!1)},children:"Close"}),Object(n.jsx)(u.a,{variant:"primary",onClick:function(){return function(){var t=new FormData;t.append("token",f(p)),t.append("board_id",e.match.params.id),t.append("board_name",w),h("editBoard",t,(function(e){e.success&&(N(!1),x(w))}))}()},children:"Save"})]})]}),Object(n.jsxs)(S.a,{show:H,onHide:function(){R(!1)},animation:!1,children:[Object(n.jsx)(S.a.Header,{closeButton:!0,children:Object(n.jsx)(S.a.Title,{children:"Edit card"})}),Object(n.jsxs)(S.a.Body,{children:[Object(n.jsxs)(j.a.Group,{controlId:"cardtitle",children:[Object(n.jsx)(j.a.Label,{children:"Card title"}),Object(n.jsx)(j.a.Control,{type:"text",value:T.title,onChange:function(e){var t;t=e.target.value,D({id:T.id,title:t,description:T.description})}})]}),Object(n.jsxs)(j.a.Group,{controlId:"carddescription",children:[Object(n.jsx)(j.a.Label,{children:"Card description"}),Object(n.jsx)(j.a.Control,{type:"text",value:T.description,onChange:function(e){var t;t=e.target.value,D({id:T.id,title:T.title,description:t})}})]})]}),Object(n.jsxs)(S.a.Footer,{children:[Object(n.jsx)(u.a,{variant:"secondary",onClick:function(){R(!1)},children:"Close"}),Object(n.jsx)(u.a,{variant:"primary",onClick:function(){return function(e){var t=new FormData;t.append("token",f(p)),t.append("card_id",e),t.append("title",T.title),t.append("description",T.description),h("updateCard",t,(function(e){if(e.success){R(!1);var t,a=B,n=Object(_.a)(s.lanes);try{var c=function(){var n,c=t.value,r=Object(_.a)(c.cards);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.id===e.data.id?a.lanes.find((function(e){return e.id===c.id})).cards.push(e.data):a.lanes.find((function(e){return e.id===c.id})).cards.push(s)}}catch(i){r.e(i)}finally{r.f()}};for(n.s();!(t=n.n()).done;)c()}catch(r){n.e(r)}finally{n.f()}i(a)}}))}(T.id)},children:"Save"})]})]})]}):Object(n.jsx)(C.a,{to:"/login"})}var P=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),b=i[0],p=i[1],O=Object(c.useState)(""),x=Object(o.a)(O,2),f=x[0],m=x[1],g=Object(c.useState)(""),w=Object(o.a)(g,2),C=w[0],S=w[1],L=Object(c.useState)(""),F=Object(o.a)(L,2),I=F[0],T=F[1],_=Object(c.useState)(""),D=Object(o.a)(_,2),E=D[0],B=D[1];return Object(n.jsx)(d.a,{style:{paddingTop:"2rem"},children:Object(n.jsxs)(l.a,{style:{padding:"1rem",width:"600px",margin:"auto"},children:[Object(n.jsx)("h2",{className:"text-center",children:"Sign Up"}),Object(n.jsxs)(j.a,{children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"username",children:[Object(n.jsx)(j.a.Label,{children:"Username *"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"Username",onChange:function(e){return r(e.target.value)}})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"password",children:[Object(n.jsx)(j.a.Label,{children:"Password *"}),Object(n.jsx)(j.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return p(e.target.value)}})]})})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"repassword",children:[Object(n.jsx)(j.a.Label,{children:"Re-Password *"}),Object(n.jsx)(j.a.Control,{type:"password",placeholder:"Re-password",onChange:function(e){return m(e.target.value)}})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"email",children:[Object(n.jsx)(j.a.Label,{children:"Email *"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"Email",onChange:function(e){return S(e.target.value)}})]})})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"firstname",children:[Object(n.jsx)(j.a.Label,{children:"First name *"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"First name",onChange:function(e){return T(e.target.value)}})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"lastname",children:[Object(n.jsx)(j.a.Label,{children:"Last name *"}),Object(n.jsx)(j.a.Control,{type:"text",placeholder:"Last name",onChange:function(e){return B(e.target.value)}})]})})]}),Object(n.jsx)(u.a,{onClick:function(){if(b===f)if(""!==a&&""!==b&&""!==C&&""!==I&&""!==E){var e=new FormData;e.append("username",a),e.append("password",b),e.append("email",C),e.append("firstname",I),e.append("lastname",E),h("signup",e,(function(e){console.log(e),e.success?window.location.href="/login":alert("Failed")}))}else alert("please input field required!");else alert("re-password not match!")},variant:"primary",type:"button",children:"Submit"}),Object(n.jsx)(v.b,{style:{marginLeft:"20px"},to:"/login",children:"Login"})]})]})})};var U=function(){var e=g(),t=Object(c.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(""),b=Object(o.a)(i,2),x=b[0],m=b[1],w=Object(c.useState)(""),S=Object(o.a)(w,2),L=S[0],F=S[1],T=Object(c.useState)(""),_=Object(o.a)(T,2),D=_[0],E=_[1],B=Object(c.useState)(""),G=Object(o.a)(B,2),P=G[0],U=G[1],N=Object(c.useState)(""),M=Object(o.a)(N,2),A=M[0],H=M[1];return Object(c.useEffect)((function(){var e=!0,t=new FormData;return t.append("token",f(p)),t.append("user_id",f(O)),h("getUserInfo",t,(function(t){t.success&&(console.log(t),e&&(s(t.data.username),E(t.data.email),U(t.data.first_name),H(t.data.last_name)))})),function(){e=!1}}),[]),e?Object(n.jsxs)(d.a,{fluid:!0,children:[Object(n.jsx)(I,{}),Object(n.jsx)(d.a,{style:{paddingTop:"2rem"},children:Object(n.jsxs)(l.a,{style:{padding:"1rem",width:"600px",margin:"auto"},children:[Object(n.jsx)("h2",{className:"text-center",children:"Account infomation"}),Object(n.jsxs)(j.a,{children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"username",children:[Object(n.jsx)(j.a.Label,{children:"Username *"}),Object(n.jsx)("br",{}),Object(n.jsx)(j.a.Label,{children:r})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"password",children:[Object(n.jsx)(j.a.Label,{children:"Old Password"}),Object(n.jsx)(j.a.Control,{value:x,type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}})]})})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"email",children:[Object(n.jsx)(j.a.Label,{children:"Email *"}),Object(n.jsx)(j.a.Control,{value:D,type:"text",placeholder:"Email",onChange:function(e){return E(e.target.value)}})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"password",children:[Object(n.jsx)(j.a.Label,{children:"New Password"}),Object(n.jsx)(j.a.Control,{value:L,type:"password",placeholder:"Password",onChange:function(e){return F(e.target.value)}})]})})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"firstname",children:[Object(n.jsx)(j.a.Label,{children:"First name *"}),Object(n.jsx)(j.a.Control,{value:P,type:"text",placeholder:"First name",onChange:function(e){return U(e.target.value)}})]})}),Object(n.jsx)(k.a,{xs:6,children:Object(n.jsxs)(j.a.Group,{controlId:"lastname",children:[Object(n.jsx)(j.a.Label,{children:"Last name *"}),Object(n.jsx)(j.a.Control,{value:A,type:"text",placeholder:"Last name",onChange:function(e){return H(e.target.value)}})]})})]}),Object(n.jsx)(u.a,{onClick:function(){if(""!==r&&""!==D&&""!==P&&""!==A){var e=new FormData;e.append("token",f(p)),e.append("username",r),e.append("oldPassword",x),e.append("newPassword",L),e.append("email",D),e.append("firstname",P),e.append("lastname",A),h("updateUserInfo",e,(function(e){console.log(e),e.success&&e.data.change_pass?alert("Updated info and password!"):e.success&&e.old_pass_not_valid?alert("Updated info! Old password not valid - password not change!"):e.success?alert("Updated info!"):alert("Failed")}))}else alert("please input field required!")},variant:"primary",type:"button",children:"Change"}),Object(n.jsx)(v.b,{style:{marginLeft:"20px"},to:"/",children:"Back"})]})]})})]}):Object(n.jsx)(C.a,{to:"/login"})};var N=function(){return Object(c.useEffect)((function(){!function(){var e=window.location.pathname.substr(1);if(!["login","signup"].includes(e))if(f(p)){var t=new FormData;t.append("token",f(p)),h("checkToken",t,(function(e){e.success||(window.location.href="/login")}))}else window.location.href="/login"}()})),Object(n.jsx)(v.a,{children:Object(n.jsxs)(C.d,{children:[Object(n.jsx)(C.b,{path:"/login",children:Object(n.jsx)(w,{})}),Object(n.jsx)(C.b,{path:"/detail/:id",component:G}),Object(n.jsx)(C.b,{path:"/signup",component:P}),Object(n.jsx)(C.b,{path:"/account",component:U}),Object(n.jsx)(C.b,{path:"/",children:Object(n.jsx)(T,{})})]})})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,309)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),M()}},[[299,1,2]]]);
//# sourceMappingURL=main.7fab7042.chunk.js.map